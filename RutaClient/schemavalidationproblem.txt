Hi,


I’m creating a proxy for webservices with wsimport and JAXWS.


Everything seems to work fine but when I add @SchemaValidation to the webservice class, deployment on Glassfish and Weblogic goes wrong with the error message:


cos-st-restricts.1.1: The type 'DateContentType' is atomic, so its {base type definition}, 'xs:anySimpleType', must be an atomic simple type definition or a built-in primitive datatype


Does anybody know what this means?


Is this a problem with the XSD’s or with SchemaValidation?


Does anyone know a fix or workaround? The XSD’s are given so I can’t change them.

---------------

Apparently wsimport used XMLGregorianCalender java attributes which caused the SchemaValidation problem.

 

I solved it using a jaxb binding file so Calender java objects are used instead.

 

binding file "bindings.xml":

 

<?xml version="1.0" encoding="UTF-8" ?>

<jaxb:bindings

version="2.0"

xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"

xmlns:xs="http://www.w3.org/2001/XMLSchema">

<jaxb:globalBindings>

<jaxb:javaType name="java.util.Calendar" xmlType="xs:dateTime"

parseMethod="javax.xml.bind.DatatypeConverter.parseDateTime"

printMethod="javax.xml.bind.DatatypeConverter.printDateTime"/>

<jaxb:javaType name="java.util.Calendar" xmlType="xs:time"

parseMethod="javax.xml.bind.DatatypeConverter.parseTime"

printMethod="javax.xml.bind.DatatypeConverter.printTime"/>

<jaxb:javaType name="java.util.Calendar" xmlType="xs:date"

parseMethod="javax.xml.bind.DatatypeConverter.parseDate"

printMethod="javax.xml.bind.DatatypeConverter.printDate"/>

<jaxb:serializable uid="1"/>

</jaxb:globalBindings>

</jaxb:bindings>

 
and added "-b bindings.xml" to the wsimport command:

 
wsimport -keep -Xnocompile -b bindings.xml some.wsdl

 
Extra adapter.java files are generated for the conversion, don't forget to use them in your java project.

Hope someone else will find this useful as well!